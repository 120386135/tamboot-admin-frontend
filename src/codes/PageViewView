import React, { PureComponent } from 'react';
import { connect } from 'dva';
import { Card, Input, Button, message } from 'antd';
import PageHeaderWrapper from '@/components/PageHeaderWrapper';
import PageView from '@/components/PageView';

@connect(({systemUser, loading}) => ({
    systemUser,
    pageViewLoading: loading.effects['systemUser/fetchPage']
}))
class PageViewView extends PureComponent {
    render() => {
        const {
            dispatch,
            systemUser: { pageData },
            pageViewLoading
        } = this.props;

        const columns = [
            {title: 'ID', dataIndex: 'id'},
            {title: '用户名', dataIndex: 'username'},
            {title: '角色', dataIndex: 'roleNameList', render: (val) => (val.join(','))}
        ]

        const searchFormItems = [
            {label: '用户名', name: 'usernameLike', component: <Input placeholder='支持模糊查询'/>}
        ]

        const operatorComponents = [
            <Button type="primary" icon="plus" onClick={()=>message.success('新建')}>新建</Button>   
        ]

        return (
            <PageHeaderWrapper>
                <PageView
                    loading={pageViewLoading}    
                    dispatch={dispatch}
                    pageData={pageData}
                    pageEffectType="systemUser/fetchPage"
                    columns={columns}
                    searchFormItems={searchFormItems}
                    operatorComponents={operatorComponents}
                >
                </PageView>
            </PageHeaderWrapper>
        )
    }
}

export default PageViewView;